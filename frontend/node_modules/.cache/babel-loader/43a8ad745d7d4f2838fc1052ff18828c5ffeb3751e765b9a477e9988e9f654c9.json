{"ast":null,"code":"var _jsxFileName = \"/Users/margaritaolaya/Desktop/Juanky - Practica/frontend/src/pages/Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { getTasks, updateTaskStatus } from '../services/taskService'; // Asegúrate de tener estas funciones en tu servicio\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [tasks, setTasks] = useState([]);\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const tasksData = await getTasks(); // Llamada para obtener las tareas\n        setTasks(tasksData);\n      } catch (error) {\n        console.error(\"Error fetching tasks:\", error);\n      }\n    };\n    fetchTasks();\n  }, []);\n  const handleChangeStatus = async (taskId, newStatus) => {\n    try {\n      const updatedTask = await updateTaskStatus(taskId, {\n        estado: newStatus\n      });\n      setTasks(prevTasks => prevTasks.map(task => task._id === taskId ? {\n        ...task,\n        estado: updatedTask.estado\n      } : task));\n      Swal.fire('Éxito', 'Estado de la tarea actualizado correctamente', 'success');\n    } catch (error) {\n      console.error(\"Error updating task status:\", error);\n      Swal.fire('Error', 'Hubo un problema al actualizar el estado', 'error');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: tasks.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-info\",\n          role: \"alert\",\n          children: \"No tienes tareas asignadas.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }, this) : tasks.map(task => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: task.titulo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: task.descripcion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Fecha:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 41\n              }, this), \" \", new Date(task.fecha).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Prioridad:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 41\n              }, this), \" \", task.prioridad]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: `badge ${task.estado ? 'bg-success' : 'bg-warning'}`,\n                children: task.estado ? 'Completada' : 'Pendiente'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 41\n              }, this), user.role === 'admin' || task.usuario._id === user.userId ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-primary\",\n                onClick: () => handleChangeStatus(task._id, !task.estado),\n                children: \"Cambiar estado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 45\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 29\n        }, this)\n      }, task._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n};\n_s(Dashboard, \"xnrbixG0+rNeUqyC7MQWRkXMqZc=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","getTasks","updateTaskStatus","Swal","jsxDEV","_jsxDEV","Dashboard","_s","user","tasks","setTasks","fetchTasks","tasksData","error","console","handleChangeStatus","taskId","newStatus","updatedTask","estado","prevTasks","map","task","_id","fire","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","role","titulo","descripcion","Date","fecha","toLocaleDateString","prioridad","usuario","userId","onClick","_c","$RefreshReg$"],"sources":["/Users/margaritaolaya/Desktop/Juanky - Practica/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { getTasks, updateTaskStatus } from '../services/taskService'; // Asegúrate de tener estas funciones en tu servicio\nimport Swal from 'sweetalert2';\n\nconst Dashboard = () => {\n    const { user } = useContext(AuthContext);\n    const [tasks, setTasks] = useState([]);\n\n    useEffect(() => {\n        const fetchTasks = async () => {\n            try {\n                const tasksData = await getTasks(); // Llamada para obtener las tareas\n                setTasks(tasksData);\n            } catch (error) {\n                console.error(\"Error fetching tasks:\", error);\n            }\n        };\n\n        fetchTasks();\n    }, []);\n\n    const handleChangeStatus = async (taskId, newStatus) => {\n        try {\n            const updatedTask = await updateTaskStatus(taskId, { estado: newStatus });\n            setTasks((prevTasks) =>\n                prevTasks.map((task) =>\n                    task._id === taskId ? { ...task, estado: updatedTask.estado } : task\n                )\n            );\n            Swal.fire('Éxito', 'Estado de la tarea actualizado correctamente', 'success');\n        } catch (error) {\n            console.error(\"Error updating task status:\", error);\n            Swal.fire('Error', 'Hubo un problema al actualizar el estado', 'error');\n        }\n    };\n\n    return (\n        <div className=\"container mt-5\">\n            <h1>Dashboard</h1>\n            <div className=\"row\">\n                {tasks.length === 0 ? (\n                    <div className=\"col-12\">\n                        <div className=\"alert alert-info\" role=\"alert\">\n                            No tienes tareas asignadas.\n                        </div>\n                    </div>\n                ) : (\n                    tasks.map((task) => (\n                        <div key={task._id} className=\"col-md-4 mb-4\">\n                            <div className=\"card\">\n                                <div className=\"card-body\">\n                                    <h5 className=\"card-title\">{task.titulo}</h5>\n                                    <p className=\"card-text\">{task.descripcion}</p>\n                                    <p className=\"card-text\">\n                                        <strong>Fecha:</strong> {new Date(task.fecha).toLocaleDateString()}\n                                    </p>\n                                    <p className=\"card-text\">\n                                        <strong>Prioridad:</strong> {task.prioridad}\n                                    </p>\n                                    <div className=\"d-flex justify-content-between\">\n                                        <span\n                                            className={`badge ${task.estado ? 'bg-success' : 'bg-warning'}`}>\n                                            {task.estado ? 'Completada' : 'Pendiente'}\n                                        </span>\n                                        {user.role === 'admin' || task.usuario._id === user.userId ? (\n                                            <button\n                                                className=\"btn btn-outline-primary\"\n                                                onClick={() =>\n                                                    handleChangeStatus(task._id, !task.estado)\n                                                }>\n                                                Cambiar estado\n                                            </button>\n                                        ) : null}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}