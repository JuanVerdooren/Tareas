{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useAuth}from\"../context/AuthContext\";import TaskForm from\"../components/TaskForm\";import TaskList from\"../components/TaskList\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const{token,user}=useAuth();const[tasks,setTasks]=useState([]);const[editingTask,setEditingTask]=useState(null);const fetchTasks=async()=>{try{const res=await fetch(\"http://localhost:5001/tasks\",{headers:{Authorization:`Bearer ${token}`}});const data=await res.json();setTasks(data);}catch(error){console.error(\"Error cargando tareas:\",error);}};useEffect(()=>{if((user===null||user===void 0?void 0:user.role)===\"admin\"){fetchTasks();}},[user]);const handleTaskCreated=()=>{fetchTasks();setEditingTask(null);};const handleEdit=task=>setEditingTask(task);const handleDelete=async id=>{try{await fetch(`http://localhost:5001/tasks/${id}`,{method:\"DELETE\",headers:{Authorization:`Bearer ${token}`}});fetchTasks();}catch(error){console.error(\"Error al eliminar la tarea:\",error);}};if(!token||(user===null||user===void 0?void 0:user.role)!==\"admin\"){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Panel de Administraci\\xF3n\"}),/*#__PURE__*/_jsx(TaskForm,{onTaskCreated:handleTaskCreated,editingTask:editingTask}),/*#__PURE__*/_jsx(TaskList,{tasks:tasks,onEdit:handleEdit,onDelete:handleDelete,isAdmin:true})]});};export default AdminPanel;","map":{"version":3,"names":["React","useEffect","useState","useAuth","TaskForm","TaskList","Navigate","jsx","_jsx","jsxs","_jsxs","AdminPanel","token","user","tasks","setTasks","editingTask","setEditingTask","fetchTasks","res","fetch","headers","Authorization","data","json","error","console","role","handleTaskCreated","handleEdit","task","handleDelete","id","method","to","className","children","onTaskCreated","onEdit","onDelete","isAdmin"],"sources":["/Users/margaritaolaya/Desktop/Juanky - Practica/frontend/src/pages/AdminPanel.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useAuth } from \"../context/AuthContext\";\nimport TaskForm from \"../components/TaskForm\";\nimport TaskList from \"../components/TaskList\";\nimport { Navigate } from \"react-router-dom\";\n\nconst AdminPanel = () => {\n  const { token, user } = useAuth();\n  const [tasks, setTasks] = useState([]);\n  const [editingTask, setEditingTask] = useState(null);\n\n  const fetchTasks = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5001/tasks\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      const data = await res.json();\n      setTasks(data);\n    } catch (error) {\n      console.error(\"Error cargando tareas:\", error);\n    }\n  };\n\n  useEffect(() => {\n    if (user?.role === \"admin\") {\n      fetchTasks();\n    }\n  }, [user]);\n\n  const handleTaskCreated = () => {\n    fetchTasks();\n    setEditingTask(null);\n  };\n\n  const handleEdit = (task) => setEditingTask(task);\n\n  const handleDelete = async (id) => {\n    try {\n      await fetch(`http://localhost:5001/tasks/${id}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      fetchTasks();\n    } catch (error) {\n      console.error(\"Error al eliminar la tarea:\", error);\n    }\n  };\n\n  if (!token || user?.role !== \"admin\") {\n    return <Navigate to=\"/\" />;\n  }\n\n  return (\n    <div className=\"container py-4\">\n      <h2 className=\"mb-4\">Panel de Administraci√≥n</h2>\n\n      <TaskForm onTaskCreated={handleTaskCreated} editingTask={editingTask} />\n\n      <TaskList\n        tasks={tasks}\n        onEdit={handleEdit}\n        onDelete={handleDelete}\n        isAdmin={true}\n      />\n    </div>\n  );\n};\n\nexport default AdminPanel;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAEC,KAAK,CAAEC,IAAK,CAAC,CAAGV,OAAO,CAAC,CAAC,CACjC,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAEpD,KAAM,CAAAgB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,6BAA6B,CAAE,CACrDC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUV,KAAK,EAChC,CACF,CAAC,CAAC,CACF,KAAM,CAAAW,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACK,IAAI,CAAC,CAAC,CAC7BT,QAAQ,CAACQ,IAAI,CAAC,CAChB,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAEDxB,SAAS,CAAC,IAAM,CACd,GAAI,CAAAY,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,IAAI,IAAK,OAAO,CAAE,CAC1BT,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAAE,CAACL,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAe,iBAAiB,CAAGA,CAAA,GAAM,CAC9BV,UAAU,CAAC,CAAC,CACZD,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAY,UAAU,CAAIC,IAAI,EAAKb,cAAc,CAACa,IAAI,CAAC,CAEjD,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CACjC,GAAI,CACF,KAAM,CAAAZ,KAAK,CAAC,+BAA+BY,EAAE,EAAE,CAAE,CAC/CC,MAAM,CAAE,QAAQ,CAChBZ,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUV,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFM,UAAU,CAAC,CAAC,CACd,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAED,GAAI,CAACb,KAAK,EAAI,CAAAC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,IAAI,IAAK,OAAO,CAAE,CACpC,mBAAOnB,IAAA,CAACF,QAAQ,EAAC4B,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CAEA,mBACExB,KAAA,QAAKyB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B5B,IAAA,OAAI2B,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,4BAAuB,CAAI,CAAC,cAEjD5B,IAAA,CAACJ,QAAQ,EAACiC,aAAa,CAAET,iBAAkB,CAACZ,WAAW,CAAEA,WAAY,CAAE,CAAC,cAExER,IAAA,CAACH,QAAQ,EACPS,KAAK,CAAEA,KAAM,CACbwB,MAAM,CAAET,UAAW,CACnBU,QAAQ,CAAER,YAAa,CACvBS,OAAO,CAAE,IAAK,CACf,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}